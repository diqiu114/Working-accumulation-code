华芯微特SWM32SRET6-50控制器应用记录[[复制链接\]](https://bbs.21ic.com/icview-3316628-1-1.html?fromuser=) 236|14 手机看帖

|      |      |
| ---- | ---- |
|      |      |

| 电梯直达[![跳转到指定楼层](swm32srt6.assets/fj_btn.png)](javascript:;)**[楼主](https://bbs.21ic.com/icview-3316628-1-1.html)**[![img](swm32srt6.assets/avatar.gif)](https://bbs.21ic.com/u/雨果喝水)[雨果喝水](https://bbs.21ic.com/u/雨果喝水)\|![中级工程师](swm32srt6.assets/online_member2.gif) ![楼主](swm32srt6.assets/ico_lz.png) 楼主 \| *2023-7-24 12:30* \| [只看该作者](https://bbs.21ic.com/icview-3316628-1-1.html?author=雨果喝水) \|[只看大图](https://bbs.21ic.com/forum.php?mod=viewthread&tid=3316628&from=album) ![回帖奖励](swm32srt6.assets/arw_r.gif)[控制](https://bbs.21ic.com/tags/控制-1.html), [控制器](https://bbs.21ic.com/tags/控制器-1.html)因为项目需要驱动800*480的TFT液晶屏，同时客户对成本比较敏感，经过对比选型，最终确定使用了华芯微特的SWM32SRET6-LQFP64，这款芯片先说说优势：  硬件方面： 优点： 主频120MHZ， 集成TFT控制器，集成8MBtyes的SDRAM，可以静态驱动最大1024*768分辨率的屏，我项目驱动的是800*480的TFT，具有CAN，SPI，SDIO，UART，I2C等长用接口，并且价格很具有优势。外设设计的都很简洁实用，不像ST的外设，为了迎合很多应用场景，外设的功能设计的灵活多变，好是好，但是这样一来，寄存器太多，需要设置的太多，太繁琐，有一些有关联的功能，需要花比较多的时间研读手册，才能找出问题。 华芯微特整个开发下来，给人的感觉就是功能不花哨，能满足大部分的常规应用，写代码的时候，不需要太关注那些寄存器，直接调库，对照例程来，一切OK，经过实际调试，没有发现什么BUG之类的问题。  [使用特权](javascript:;)*[评论](https://bbs.21ic.com/forum.php?mod=misc&action=comment&tid=3316628&pid=13560414&extra=page%3D1&page=1)[回复](https://bbs.21ic.com/forum.php?mod=post&action=reply&fid=1130&tid=3316628&reppost=13560414&extra=page%3D1&page=1) [赏](javascript:;)*[点赞](https://bbs.21ic.com/plugin.php?id=ilike:send&ac=showpopup&tid=3316628&pid=13560414&hash=6ac5efce)**评论**[![img](swm32srt6.assets/avatar-17116789529881.gif)](https://bbs.21ic.com/u/雨果喝水)[雨果喝水](https://bbs.21ic.com/u/雨果喝水) 2023-7-24 12:30 [回复TA](javascript:void(0);) ———————————————— 版权声明：本文为CSDN博主「皮皮几」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。 原文链接：https://blog.csdn.net/liufan2007/article/details/120630287 相关下载• [SWM32SRET6-50 驱动TFT-LCD应用笔记20220601.pdf](https://dl.21ic.com/download/swm32sret6-635813.html)• [SWM32SRET6_DEMO_32SRE03原理图.pdf](https://dl.21ic.com/download/swm32sret6_demo_32sre03-635814.html)• [SWM32SRET6_DEMO_32SRE04硬件原理图.pdf](https://dl.21ic.com/download/swm32sret6_demo_32sre04-635815.html)相关帖子• [智能控制板软硬件开发与销售](https://bbs.21ic.com/icview-3368628-1-1.html)• [EtherCAT控制方案](https://bbs.21ic.com/icview-3368600-1-1.html)• [基于XMC系列的电机控制方案](https://bbs.21ic.com/icview-3368574-1-1.html)• [如何实现流控制](https://bbs.21ic.com/icview-3368390-1-1.html)• [DCS系统在工业场合中的功能是什么？为你揭秘常见DCS系统的应用场景](https://bbs.21ic.com/icview-3368224-1-1.html)• [当电机控制不稳定时，可能的原因有哪些？](https://bbs.21ic.com/icview-3368096-1-1.html)• [如何正确实现 FOC 算法？有哪些常见的实现方式？](https://bbs.21ic.com/icview-3368094-1-1.html)• [FOC 算法的原理是什么？如何理解其核心概念？](https://bbs.21ic.com/icview-3368092-1-1.html)• [从模式控制寄存器（TIMx_SMCR）中的 SMS[2:0\] 位对应的不同从模式选择](https://bbs.21ic.com/icview-3368086-1-1.html) |
| ------------------------------------------------------------ |
|                                                              |
|                                                              |
|                                                              |
|                                                              |

**[沙发](https://bbs.21ic.com/forum.php?mod=redirect&goto=findpost&ptid=3316628&pid=13560418)**[![img](swm32srt6.assets/avatar.gif)](https://bbs.21ic.com/u/雨果喝水)[雨果喝水](https://bbs.21ic.com/u/雨果喝水)|![中级工程师](swm32srt6.assets/online_member2.gif) ![楼主](swm32srt6.assets/ico_lz.png) 楼主 | *2023-7-24 12:30* | [只看该作者](https://bbs.21ic.com/icview-3316628-1-1.html?author=雨果喝水)缺点： 1. 管脚封装最大LQFP64脚，对于外围功能较多的应用需要外部扩展IO口，我的项目中就是由于IO不够，后来扩展了IO芯片，也不知道官方是怎么想的，扩展个100脚的，它不香吗，这样应用的面就更广了，这点真的很窝火。不过，这款芯片的IO的映射功能那是真爽，可以说每个外设都可以映射到每个管脚，不过要注意的是，管脚功能分奇偶分配原则，比如说串口的RXD可以分配到所有奇数编号的引脚PXn上(n=1,3,5,7...)，TXD则可以分配到所有偶数编号的引脚PXn（n=0，2，4，6，8...)，如果搞反了，就只能改板子了。  2. 内部SDRAM的时钟频率太低，只有四分之一的主频，120MHZ/4 = 30MHZ，基本上驱动个7寸的屏就满带宽了，不过这款芯片的主频可以超频到200MHZ，官方放出的TFT驱动的demo就将主频超频到200MHZ，我实际项目也是用的200MHZ，在2个月的调试的过程中，没有发现什么死机之类的问题。  3. SDRAM只能按照字对齐方式读写，不能半字或者字节方式读写，也是很窝火。真是浪费了这么好的架构。  4. 驱动LCD屏的时候，如果单步调试停止，TFT会停止向SDRAM读写数据，LCD屏会白屏，不过在实际调试的时候，没有太大影响。  5. TFT没有硬件加速单元，而且无法使用DMA传输，这点太窝火了，LittleVGL驱动接口部分，只能使用纯软件打点，占用CPU资源，而且由于只能字访问SDRAM，由于使用的RGB565色彩模式，打点的时候，需要软件判断图形边界，然后做读-改-写的操作，进一步降低了FPS，我将官方的打点函数进行了重写优化，有一定的效果。另外，使用单缓冲刷新时，有比较明显的飘动感和轻微的撕裂感，帧率10帧左右，改成官方的双缓冲方式，还是有飘动感，帧率没有什么变化。并且使用双缓冲是使用纯软件复制的方式。非常耗费CPU资源。后来直接干成了单缓冲方式，有一点撕裂感，但是能接受，关键是可以腾出一块帧显存空间出来，用作它用。另外，相同的硬件配置下，LittleVGL驱动起来没有EMWIN流畅，但是，官方并没有出EMWIN的工程例子，我对EMWIN的底层不是很熟悉，猜测可能是因为SDRAM字访问限制的原因，无法使用EMWIN。 如果有朋友移植到EMWIN，可以在评论区交流交流。 





链接：https://bbs.21ic.com/icview-3316628-1-1.html
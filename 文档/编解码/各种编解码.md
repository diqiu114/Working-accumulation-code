# 彻底弄懂 Unicode 编码

 



## ASCII码

ASCII 码一共定义了 128 个字符，例如大写的字母 A 是 65（这是十进制数，对应二进制是0100 0001）。这 128 个字符只使用了 8 位二进制数中的后面 7 位，最前面的一位统一规定为 0。

## 历史问题

英语用 128 个字符来编码完全是足够的，但是用来表示其他语言，128 个字符是远远不够的。于是，一些欧洲的国家就决定，将 ASCII 码中闲置的最高位利用起来，这样一来就能表示 256 个字符。但是，这里又有了一个问题，那就是不同的国家的字符集可能不同，就算它们都能用 256 个字符表示全，但是同一个码点（也就是 8 位二进制数）表示的字符可能可能不同。例如，144 在阿拉伯人的 ASCII 码中是 گ，而在俄罗斯的 ASCII 码中是 ђ。

因此，ASCII 码的问题在于尽管所有人都在 0 - 127 号字符上达成了一致，但对于 128 - 255 号字符上却有很多种不同的解释。与此同时，亚洲语言有更多的字符需要被存储，一个字节已经不够用了。于是，人们开始使用两个字节来存储字符。

各种各样的编码方式成了系统开发者的噩梦，因为他们想把软件卖到国外。于是，他们提出了一个“内码表”的概念，可以切换到相应语言的一个内码表，这样才能显示相应语言的字母。在这种情况下，如果使用多语种，那么就需要频繁的在内码表内进行切换。

## Unicode

对于 Unicode 有一些误解，它仅仅只是一个字符集，每个字符对应了一个二进制代码，这个二进制被称为码点

### 编码

对每个码点进行编码

#### UTF-8

UTF-8 是一个非常惊艳的编码方式，漂亮的实现了对 ASCII 码的向后兼容，以保证 Unicode 可以被大众接受。

UTF-8 是目前互联网上使用最广泛的一种 Unicode 编码方式，它的最大特点就是可变长。它可以使用 1 - 4 个字节表示一个字符，根据字符的不同变换长度。编码规则如下：

1. 对于单个字节的字符，第一位设为 0，后面的 7 位对应这个字符的 Unicode 码点。因此，对于英文中的 0 - 127 号字符，与 ASCII 码完全相同。这意味着 ASCII 码那个年代的文档用 UTF-8 编码打开完全没有问题。
2. 对于需要使用 N 个字节来表示的字符（N > 1），第一个字节的前 N 位都设为 1，第 N + 1 位设为0，剩余的 N - 1 个字节的前两位都设位 10，剩下的二进制位则使用这个字符的 Unicode 码点来填充。

编码规则如下：

| Unicode 十六进制码点范围 | UTF-8 二进制                        |
| ------------------------ | ----------------------------------- |
| 0000 0000 - 0000 007F    | 0xxxxxxx                            |
| 0000 0080 - 0000 07FF    | 110xxxxx 10xxxxxx                   |
| 0000 0800 - 0000 FFFF    | 1110xxxx 10xxxxxx 10xxxxxx          |
| 0001 0000 - 0010 FFFF    | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |

根据上面编码规则对照表，进行 UTF-8 编码和解码就简单多了。下面以汉字“汉”为利，具体说明如何进行 UTF-8 编码和解码。

“汉”的 Unicode 码点是 0x6c49（110 1100 0100 1001），通过上面的对照表可以发现，`0x0000 6c49` 位于第三行的范围，那么得出其格式为 `1110xxxx 10xxxxxx 10xxxxxx`。接着，从“汉”的二进制数最后一位开始，从后向前依次填充对应格式中的 x，多出的 x 用 0 补上。这样，就得到了“汉”的 UTF-8 编码为 `11100110 10110001 10001001`，转换成十六进制就是 `0xE6 0xB7 0x89`。

解码的过程也十分简单：如果一个字节的第一位是 0 ，则说明这个字节对应一个字符；如果一个字节的第一位1，那么连续有多少个 1，就表示该字符占用多少个字节。

# GB2312简体中文编码表

GB2312编码是第一个汉字编码国家标准，由中国国家标准总局1980年发布，1981年5月1日开始使用。GB2312编码共收录汉字6763个，其中一级汉字3755个，二级汉字3008个。同时，GB2312编码收录了包括拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母在内的682个全角字符。

## 分区表示

GB2312编码范围：A1A1－FEFE，其中汉字编码范围：B0A1-F7FE。
GB2312编码对所收录字符进行了“分区”处理，共94个区，每区含有94个位，共8836个码位。这种表示方式也称为区位码。

- GB2312，又称为GB0，由中国国家标准总局发布，1981年5月1日实施
- GB2312标准共收录6763个汉字，其中一级汉字3755个，二级汉字3008个
- GB2312是一种区位码。分为94个区(01-94)，每区94个字符(01-94)
- 01-09区为特殊符号，收录除汉字外的682个字符
- 10-15区没有编码，为空白区
- 16-55区为一级汉字，按拼音排序，共3755个
- 56-87区为二级汉字，按部首／笔画排序，共3008个
- 88-94区没有编码，为空白区
- GB2312只是编码表，在计算机中通常都是用"EUC-CN"表示法，即在每个区位加上0xA0来表示。区和位分别占用一个字节。

举例来说，“啊”字是GB2312编码中的第一个汉字，它位于16区的01位，所以它的区位码就是1601。

## 双字节编码

GB2312规定对收录的每个字符采用两个字节表示，第一个字节为“高字节”，对应94个区；第二个字节为“低字节”，对应94个位。所以它的区位码范围是：0101－9494。区号和位号分别加上0xA0就是GB2312编码。例如最后一个码位是9494，区号和位号分别转换成十六进制是5E5E，0x5E+0xA0＝0xFE，所以该码位的GB2312编码是FEFE。

GB2312编码范围：A1A1－FEFE，其中汉字的编码范围为B0A1-F7FE，第一字节0xB0-0xF7（对应区号：16－87），第二个字节0xA1-0xFE（对应位号：01－94）。

若要查询具体字符的编码请前往：[汉字字符集编码查询](https://www.qqxiuzi.cn/bianma/zifuji.php)。

# GB2312汉字编码字符集对照表

| 第01区 | +0   | +1   | +2   | +3   | +4   | +5   | +6   | +7   | +8   | +9   | +A   | +B   | +C   | +D   | +E   | +F   |
| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| A1A0   |      |      | 、   | 。   | ・   | ˉ    | ˇ    | ¨    | 〃   | 々   | ―    | ～   | ‖    | …    | ‘    | ’    |
| A1B0   | “    | ”    | 〔   | 〕   | 〈   | 〉   | 《   | 》   | 「   | 」   | 『   | 』   | 〖   | 〗   | 【   | 】   |
| A1C0   | ±    | ×    | ÷    | ∶    | ∧    | ∨    | ∑    | ∏    | ∪    | ∩    | ∈    | ∷    | √    | ⊥    | ∥    | ∠    |
| A1D0   | ⌒    | ⊙    | ∫    | ∮    | ≡    | ≌    | ≈    | ∽    | ∝    | ≠    | ≮    | ≯    | ≤    | ≥    | ∞    | ∵    |
| A1E0   | ∴    | ♂    | ♀    | °    | ′    | ″    | ℃    | ＄   | ¤    | ￠   | ￡   | ‰    | §    | №    | ☆    | ★    |
| A1F0   | ○    | ●    | ◎    | ◇    | ◆    | □    | ■    | △    | ▲    | ※    | →    | ←    | ↑    | ↓    | 〓   |      |
| 第02区 | +0   | +1   | +2   | +3   | +4   | +5   | +6   | +7   | +8   | +9   | +A   | +B   | +C   | +D   | +E   | +F   |
| A2A0   |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |
| A2B0   |      | ⒈    | ⒉    | ⒊    | ⒋    | ⒌    | ⒍    | ⒎    | ⒏    | ⒐    | ⒑    | ⒒    | ⒓    | ⒔    | ⒕    | ⒖    |
| A2C0   | ⒗    | ⒘    | ⒙    | ⒚    | ⒛    | ⑴    | ⑵    | ⑶    | ⑷    | ⑸    | ⑹    | ⑺    | ⑻    | ⑼    | ⑽    | ⑾    |
| A2D0   | ⑿    | ⒀    | ⒁    | ⒂    | ⒃    | ⒄    | ⒅    | ⒆    | ⒇    | ①    | ②    | ③    | ④    | ⑤    | ⑥    | ⑦    |
| A2E0   | ⑧    | ⑨    | ⑩    |      |      | ㈠   | ㈡   | ㈢   | ㈣   | ㈤   | ㈥   | ㈦   | ㈧   | ㈨   | ㈩   |      |
| A2F0   |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |

